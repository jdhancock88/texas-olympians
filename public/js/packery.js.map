{"version":3,"sources":["packery.js"],"names":["window","factory","define","amd","module","exports","Packery","Rect","props","prop","defaults","this","x","y","width","height","proto","prototype","contains","rect","otherWidth","otherHeight","overlaps","thisRight","thisBottom","rectRight","rectBottom","getMaximalFreeRects","freeRect","freeRects","push","canFit","require","Packer","sortDirection","reset","spaces","initialSpace","sorter","sorters","downwardLeftToRight","pack","i","length","space","placeInSpace","columnPack","canFitInSpaceColumn","placed","rowPack","canFitInSpaceRow","revisedSpaces","newSpaces","apply","mergeSortSpaces","mergeRects","sort","addSpace","rects","rectLoop","j","compareRect","splice","a","b","rightwardTopToBottom","Item","Outlayer","docElemStyle","document","documentElement","style","transformProperty","transform","arguments","Object","create","__create","_create","call","_moveTo","moveTo","dx","Math","abs","position","dy","canHackGoTo","layout","dragItemCount","isPlacing","isTransitioning","goTo","enablePlacing","removeTransitionStyles","element","getSize","_setRectSize","disablePlacing","removeElem","parentNode","removeChild","packer","emitEvent","showDropPlaceholder","dropPlaceholder","createElement","className","size","positionDropPlaceholder","appendChild","hideDropPlaceholder","verticalSorter","horizontalSorter","getDistance","sqrt","shiftPacker","isEnabled","_this","handleDraggabilly","dragStart","itemDragStart","dragMove","itemDragMove","dragEnd","itemDragEnd","handleUIDraggable","start","event","ui","currentTarget","drag","left","top","stop","_resetLayout","_getMeasurements","_getOption","Infinity","innerHeight","gutter","innerWidth","maxY","maxX","_getMeasurement","_getItemLayoutPosition","item","isShifting","packMethod","_getPackMethod","_setMaxXY","shiftLayout","max","elem","w","outerWidth","h","outerHeight","_applyGridGutter","columnWidth","rowHeight","min","measurement","gridSize","remainder","mathMethod","_getContainerSize","_manageStamp","getItem","offset","_getElementOffset","right","bottom","sortItemsByPosition","items","fit","stamp","updateShiftTargets","undefined","shift","_bindFitEvents","unstamp","onLayout","ticks","dispatchEvent","once","resize","isResizeBound","needsResizeLayout","options","shiftPercentResize","resizeShiftPercentLayout","innerSize","_getItemsForLayout","isHorizontal","coord","measure","segmentName","previousSegment","currentSegment","forEach","seg","round","currentSize","previousSize","dropItem","_getBoundingRect","isOriginLeft","isOriginTop","stamps","shiftTargetKeys","shiftTargets","boundsSize","segment","segmentSpan","ceil","segs","floor","_addShiftTarget","cornerX","cornerY","segSpan","segX","segY","checkCoord","key","hasKey","indexOf","shiftPosition","minDistance","target","distance","DRAG_THROTTLE_TIME","onDrag","paddingLeft","paddingTop","now","Date","_itemDragTime","clearTimeout","dragTimeout","setTimeout","onDragEndLayoutComplete","completeCount","classList","remove","add","bindDraggabillyEvents","draggie","_bindDraggabillyEvents","unbindDraggabillyEvents","method","handlers","bindUIDraggableEvents","$elems","_bindUIDraggableEvents","unbindUIDraggableEvents","_destroy","destroy","Isotope","LayoutMode","PackeryMode","keepModeMethods","_needsResizeLayout","needsVerticalResizeLayout","option","horizontal","isotope"],"mappings":"CAUE,SAAUA,EAAQC,GAGI,kBAAVC,SAAwBA,OAAOC,IAEzCD,OAAQ,kBAAkBD,GACC,gBAAVG,SAAsBA,OAAOC,QAE9CD,OAAOC,QAAUJ,KAGjBD,EAAOM,QAAUN,EAAOM,YACxBN,EAAOM,QAAQC,KAAON,MAGvBD,OAAQ,WAKX,QAASO,GAAMC,GAEb,IAAM,GAAIC,KAAQF,GAAKG,SACrBC,KAAMF,GAASF,EAAKG,SAAUD,EAGhC,KAAMA,IAAQD,GACZG,KAAMF,GAASD,EAAOC,GAK1BF,EAAKG,UACHE,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,EAGV,IAAIC,GAAQT,EAAKU,SAyGjB,OAlGAD,GAAME,SAAW,SAAUC,GAEzB,GAAIC,GAAaD,EAAKL,OAAS,EAC3BO,EAAcF,EAAKJ,QAAU,CACjC,OAAOJ,MAAKC,GAAKO,EAAKP,GACpBD,KAAKE,GAAKM,EAAKN,GACfF,KAAKC,EAAID,KAAKG,OAASK,EAAKP,EAAIQ,GAChCT,KAAKE,EAAIF,KAAKI,QAAUI,EAAKN,EAAIQ,GAQrCL,EAAMM,SAAW,SAAUH,GACzB,GAAII,GAAYZ,KAAKC,EAAID,KAAKG,MAC1BU,EAAab,KAAKE,EAAIF,KAAKI,OAC3BU,EAAYN,EAAKP,EAAIO,EAAKL,MAC1BY,EAAaP,EAAKN,EAAIM,EAAKJ,MAG/B,OAAOJ,MAAKC,EAAIa,GACdF,EAAYJ,EAAKP,GACjBD,KAAKE,EAAIa,GACTF,EAAaL,EAAKN,GAOtBG,EAAMW,oBAAsB,SAAUR,GAGpC,IAAMR,KAAKW,SAAUH,GACnB,OAAO,CAGT,IACIS,GADAC,KAGAN,EAAYZ,KAAKC,EAAID,KAAKG,MAC1BU,EAAab,KAAKE,EAAIF,KAAKI,OAC3BU,EAAYN,EAAKP,EAAIO,EAAKL,MAC1BY,EAAaP,EAAKN,EAAIM,EAAKJ,MA8C/B,OA3CKJ,MAAKE,EAAIM,EAAKN,IACjBe,EAAW,GAAIrB,IACbK,EAAGD,KAAKC,EACRC,EAAGF,KAAKE,EACRC,MAAOH,KAAKG,MACZC,OAAQI,EAAKN,EAAIF,KAAKE,IAExBgB,EAAUC,KAAMF,IAIbL,EAAYE,IACfG,EAAW,GAAIrB,IACbK,EAAGa,EACHZ,EAAGF,KAAKE,EACRC,MAAOS,EAAYE,EACnBV,OAAQJ,KAAKI,SAEfc,EAAUC,KAAMF,IAIbJ,EAAaE,IAChBE,EAAW,GAAIrB,IACbK,EAAGD,KAAKC,EACRC,EAAGa,EACHZ,MAAOH,KAAKG,MACZC,OAAQS,EAAaE,IAEvBG,EAAUC,KAAMF,IAIbjB,KAAKC,EAAIO,EAAKP,IACjBgB,EAAW,GAAIrB,IACbK,EAAGD,KAAKC,EACRC,EAAGF,KAAKE,EACRC,MAAOK,EAAKP,EAAID,KAAKC,EACrBG,OAAQJ,KAAKI,SAEfc,EAAUC,KAAMF,IAGXC,GAGTb,EAAMe,OAAS,SAAUZ,GACvB,MAAOR,MAAKG,OAASK,EAAKL,OAASH,KAAKI,QAAUI,EAAKJ,QAGlDR,IASL,SAAUP,EAAQC,GAGlB,GAAsB,kBAAVC,SAAwBA,OAAOC,IAEzCD,OAAQ,qBAAsB,UAAYD,OACrC,IAAsB,gBAAVG,SAAsBA,OAAOC,QAE9CD,OAAOC,QAAUJ,EACf+B,QAAQ,eAEL,CAEL,GAAI1B,GAAUN,EAAOM,QAAUN,EAAOM,WACtCA,GAAQ2B,OAAShC,EAASK,EAAQC,QAGnCP,OAAQ,SAAkBO,GAW7B,QAAS0B,GAAQnB,EAAOC,EAAQmB,GAC9BvB,KAAKG,MAAQA,GAAS,EACtBH,KAAKI,OAASA,GAAU,EACxBJ,KAAKuB,cAAgBA,GAAiB,sBAEtCvB,KAAKwB,QAGP,GAAInB,GAAQiB,EAAOhB,SAEnBD,GAAMmB,MAAQ,WACZxB,KAAKyB,SAEL,IAAIC,GAAe,GAAI9B,IACrBK,EAAG,EACHC,EAAG,EACHC,MAAOH,KAAKG,MACZC,OAAQJ,KAAKI,QAGfJ,MAAKyB,OAAON,KAAMO,GAElB1B,KAAK2B,OAASC,EAAS5B,KAAKuB,gBAAmBK,EAAQC,qBAIzDxB,EAAMyB,KAAO,SAAUtB,GACrB,IAAM,GAAIuB,GAAE,EAAGA,EAAI/B,KAAKyB,OAAOO,OAAQD,IAAM,CAC3C,GAAIE,GAAQjC,KAAKyB,OAAOM,EACxB,IAAKE,EAAMb,OAAQZ,GAAS,CAC1BR,KAAKkC,aAAc1B,EAAMyB,EACzB,UAKN5B,EAAM8B,WAAa,SAAU3B,GAC3B,IAAM,GAAIuB,GAAE,EAAGA,EAAI/B,KAAKyB,OAAOO,OAAQD,IAAM,CAC3C,GAAIE,GAAQjC,KAAKyB,OAAOM,GACpBK,EAAsBH,EAAMhC,GAAKO,EAAKP,GACxCgC,EAAMhC,EAAIgC,EAAM9B,OAASK,EAAKP,EAAIO,EAAKL,OACvC8B,EAAM7B,QAAUI,EAAKJ,OAAS,GAChC,IAAKgC,EAAsB,CACzB5B,EAAKN,EAAI+B,EAAM/B,EACfF,KAAKqC,OAAQ7B,EACb,UAKNH,EAAMiC,QAAU,SAAU9B,GACxB,IAAM,GAAIuB,GAAE,EAAGA,EAAI/B,KAAKyB,OAAOO,OAAQD,IAAM,CAC3C,GAAIE,GAAQjC,KAAKyB,OAAOM,GACpBQ,EAAmBN,EAAM/B,GAAKM,EAAKN,GACrC+B,EAAM/B,EAAI+B,EAAM7B,QAAUI,EAAKN,EAAIM,EAAKJ,QACxC6B,EAAM9B,OAASK,EAAKL,MAAQ,GAC9B,IAAKoC,EAAmB,CACtB/B,EAAKP,EAAIgC,EAAMhC,EACfD,KAAKqC,OAAQ7B,EACb,UAKNH,EAAM6B,aAAe,SAAU1B,EAAMyB,GAEnCzB,EAAKP,EAAIgC,EAAMhC,EACfO,EAAKN,EAAI+B,EAAM/B,EAEfF,KAAKqC,OAAQ7B,IAIfH,EAAMgC,OAAS,SAAU7B,GAGvB,IAAM,GADFgC,MACMT,EAAE,EAAGA,EAAI/B,KAAKyB,OAAOO,OAAQD,IAAM,CAC3C,GAAIE,GAAQjC,KAAKyB,OAAOM,GACpBU,EAAYR,EAAMjB,oBAAqBR,EAEtCiC,GACHD,EAAcrB,KAAKuB,MAAOF,EAAeC,GAEzCD,EAAcrB,KAAMc,GAIxBjC,KAAKyB,OAASe,EAEdxC,KAAK2C,mBAGPtC,EAAMsC,gBAAkB,WAEtBrB,EAAOsB,WAAY5C,KAAKyB,QACxBzB,KAAKyB,OAAOoB,KAAM7C,KAAK2B,SAIzBtB,EAAMyC,SAAW,SAAUtC,GACzBR,KAAKyB,OAAON,KAAMX,GAClBR,KAAK2C,mBAUPrB,EAAOsB,WAAa,SAAUG,GAC5B,GAAIhB,GAAI,EACJvB,EAAOuC,EAAMhB,EAEjBiB,GACA,KAAQxC,GAAO,CAIb,IAHA,GAAIyC,GAAI,EACJC,EAAcH,EAAOhB,EAAIkB,GAErBC,GAAc,CACpB,GAAMA,GAAe1C,EACnByC,QACK,CAAA,GAAKC,EAAY3C,SAAUC,GAAS,CAEzCuC,EAAMI,OAAQpB,EAAG,GACjBvB,EAAOuC,EAAMhB,EACb,SAASiB,GACCxC,EAAKD,SAAU2C,GAEzBH,EAAMI,OAAQpB,EAAIkB,EAAG,GAErBA,IAEFC,EAAcH,EAAOhB,EAAIkB,GAE3BlB,IACAvB,EAAOuC,EAAMhB,GAGf,MAAOgB,GAOT,IAAInB,IAEFC,oBAAqB,SAAUuB,EAAGC,GAChC,MAAOD,GAAElD,EAAImD,EAAEnD,GAAKkD,EAAEnD,EAAIoD,EAAEpD,GAG9BqD,qBAAsB,SAAUF,EAAGC,GACjC,MAAOD,GAAEnD,EAAIoD,EAAEpD,GAAKmD,EAAElD,EAAImD,EAAEnD,GAOhC,OAAOoB,KAQL,SAAUjC,EAAQC,GAGI,kBAAVC,SAAwBA,OAAOC,IAEzCD,OAAQ,mBACJ,oBACA,UAEFD,GACyB,gBAAVG,SAAsBA,OAAOC,QAE9CD,OAAOC,QAAUJ,EACf+B,QAAQ,YACRA,QAAQ,WAIVhC,EAAOM,QAAQ4D,KAAOjE,EACpBD,EAAOmE,SACPnE,EAAOM,QAAQC,OAIlBP,OAAQ,SAAkBmE,EAAU5D,GAKvC,GAAI6D,GAAeC,SAASC,gBAAgBC,MAExCC,EAAqD,gBAA1BJ,GAAaK,UAC1C,YAAc,kBAGZP,EAAO,WACTC,EAASD,KAAKb,MAAO1C,KAAM+D,YAEzB1D,EAAQkD,EAAKjD,UAAY0D,OAAOC,OAAQT,EAASD,KAAKjD,WAEtD4D,EAAW7D,EAAM8D,OACrB9D,GAAM8D,QAAU,WAEdD,EAASE,KAAMpE,MACfA,KAAKQ,KAAO,GAAIZ,GAGlB,IAAIyE,GAAUhE,EAAMiE,MAuEpB,OAtEAjE,GAAMiE,OAAS,SAAUrE,EAAGC,GAE1B,GAAIqE,GAAKC,KAAKC,IAAKzE,KAAK0E,SAASzE,EAAIA,GACjC0E,EAAKH,KAAKC,IAAKzE,KAAK0E,SAASxE,EAAIA,GAEjC0E,EAAc5E,KAAK6E,OAAOC,gBAAkB9E,KAAK+E,YAClD/E,KAAKgF,iBAAwB,EAALT,GAAe,EAALI,CACrC,OAAKC,OACH5E,MAAKiF,KAAMhF,EAAGC,OAGhBmE,GAAQ3B,MAAO1C,KAAM+D,YAKvB1D,EAAM6E,cAAgB,WACpBlF,KAAKmF,yBAEAnF,KAAKgF,iBAAmBnB,IAC3B7D,KAAKoF,QAAQxB,MAAOC,GAAsB,QAE5C7D,KAAKgF,iBAAkB,EACvBhF,KAAKqF,UACLrF,KAAK6E,OAAOS,aAActF,KAAKoF,QAASpF,KAAKQ,MAC7CR,KAAK+E,WAAY,GAGnB1E,EAAMkF,eAAiB,WACrBvF,KAAK+E,WAAY,GAMnB1E,EAAMmF,WAAa,WACjBxF,KAAKoF,QAAQK,WAAWC,YAAa1F,KAAKoF,SAE1CpF,KAAK6E,OAAOc,OAAO7C,SAAU9C,KAAKQ,MAClCR,KAAK4F,UAAW,UAAY5F,QAK9BK,EAAMwF,oBAAsB,WAC1B,GAAIC,GAAkB9F,KAAK8F,eACrBA,KAEJA,EAAkB9F,KAAK8F,gBAAkBpC,SAASqC,cAAc,OAChED,EAAgBE,UAAY,2BAC5BF,EAAgBlC,MAAMc,SAAW,YAGnCoB,EAAgBlC,MAAMzD,MAAQH,KAAKiG,KAAK9F,MAAQ,KAChD2F,EAAgBlC,MAAMxD,OAASJ,KAAKiG,KAAK7F,OAAS,KAClDJ,KAAKkG,0BACLlG,KAAK6E,OAAOO,QAAQe,YAAaL,IAGnCzF,EAAM6F,wBAA0B,WAC9BlG,KAAK8F,gBAAgBlC,MAAOC,GAAsB,aAChD7D,KAAKQ,KAAKP,EAAI,OAASD,KAAKQ,KAAKN,EAAI,OAGzCG,EAAM+F,oBAAsB,WAC1BpG,KAAK6E,OAAOO,QAAQM,YAAa1F,KAAK8F,kBAKjCvC,IAeL,SAAUlE,EAAQC,GAGI,kBAAVC,SAAwBA,OAAOC,IAEzCD,OAAQ,sBACJ,oBACA,oBACA,SACA,WACA,UAEFD,GACyB,gBAAVG,SAAsBA,OAAOC,QAE9CD,OAAOC,QAAUJ,EACf+B,QAAQ,YACRA,QAAQ,YACRA,QAAQ,UACRA,QAAQ,YACRA,QAAQ,WAIVhC,EAAOM,QAAUL,EACfD,EAAOgG,QACPhG,EAAOmE,SACPnE,EAAOM,QAAQC,KACfP,EAAOM,QAAQ2B,OACfjC,EAAOM,QAAQ4D,OAIlBlE,OAAQ,SAAkBgG,EAAS7B,EAAU5D,EAAM0B,EAAQiC,GAmO9D,QAAS8C,GAAgBjD,EAAGC,GAC1B,MAAOD,GAAEsB,SAASxE,EAAImD,EAAEqB,SAASxE,GAAKkD,EAAEsB,SAASzE,EAAIoD,EAAEqB,SAASzE,EAGlE,QAASqG,GAAkBlD,EAAGC,GAC5B,MAAOD,GAAEsB,SAASzE,EAAIoD,EAAEqB,SAASzE,GAAKmD,EAAEsB,SAASxE,EAAImD,EAAEqB,SAASxE,EA4PlE,QAASqG,GAAanD,EAAGC,GACvB,GAAIkB,GAAKlB,EAAEpD,EAAImD,EAAEnD,EACb0E,EAAKtB,EAAEnD,EAAIkD,EAAElD,CACjB,OAAOsE,MAAKgC,KAAMjC,EAAKA,EAAKI,EAAKA,GAjenC/E,EAAKU,UAAUc,OAAS,SAAUZ,GAChC,MAAOR,MAAKG,OAASK,EAAKL,MAAQ,GAAKH,KAAKI,QAAUI,EAAKJ,OAAS,EAMtE,IAAIT,GAAU6D,EAASS,OAAO,UAC9BtE,GAAQ4D,KAAOA,CAEf,IAAIlD,GAAQV,EAAQW,SAEpBD,GAAM8D,QAAU,WAEdX,EAASlD,UAAU6D,QAAQC,KAAMpE,MAGjCA,KAAK2F,OAAS,GAAIrE,GAElBtB,KAAKyG,YAAc,GAAInF,GACvBtB,KAAK0G,WAAY,EAEjB1G,KAAK8E,cAAgB,CAGrB,IAAI6B,GAAQ3G,IACZA,MAAK4G,mBACHC,UAAW,WACTF,EAAMG,cAAe9G,KAAKoF,UAE5B2B,SAAU,WACRJ,EAAMK,aAAchH,KAAKoF,QAASpF,KAAK0E,SAASzE,EAAGD,KAAK0E,SAASxE,IAEnE+G,QAAS,WACPN,EAAMO,YAAalH,KAAKoF,WAI5BpF,KAAKmH,mBACHC,MAAO,SAAiCC,EAAOC,GAEvCA,GAGNX,EAAMG,cAAeO,EAAME,gBAE7BC,KAAM,SAAgCH,EAAOC,GACrCA,GAGNX,EAAMK,aAAcK,EAAME,cAAeD,EAAG5C,SAAS+C,KAAMH,EAAG5C,SAASgD,MAEzEC,KAAM,SAAgCN,EAAOC,GACrCA,GAGNX,EAAMO,YAAaG,EAAME,kBAY/BlH,EAAMuH,aAAe,WACnB5H,KAAKqF,UAELrF,KAAK6H,kBAGL,IAAI1H,GAAOC,EAAQmB,CAEdvB,MAAK8H,WAAW,eACnB3H,EAAQ4H,EAAAA,EACR3H,EAASJ,KAAKiG,KAAK+B,YAAchI,KAAKiI,OACtC1G,EAAgB,yBAEhBpB,EAAQH,KAAKiG,KAAKiC,WAAalI,KAAKiI,OACpC7H,EAAS2H,EAAAA,EACTxG,EAAgB,uBAGlBvB,KAAK2F,OAAOxF,MAAQH,KAAKyG,YAAYtG,MAAQA,EAC7CH,KAAK2F,OAAOvF,OAASJ,KAAKyG,YAAYrG,OAASA,EAC/CJ,KAAK2F,OAAOpE,cAAgBvB,KAAKyG,YAAYlF,cAAgBA,EAE7DvB,KAAK2F,OAAOnE,QAGZxB,KAAKmI,KAAO,EACZnI,KAAKoI,KAAO,GAOd/H,EAAMwH,iBAAmB,WACvB7H,KAAKqI,gBAAiB,cAAe,SACrCrI,KAAKqI,gBAAiB,YAAa,UACnCrI,KAAKqI,gBAAiB,SAAU,UAGlChI,EAAMiI,uBAAyB,SAAUC,GAEvC,GADAvI,KAAKsF,aAAciD,EAAKnD,QAASmD,EAAK/H,MACjCR,KAAKwI,YAAcxI,KAAK8E,cAAgB,EAAI,CAC/C,GAAI2D,GAAazI,KAAK0I,gBACtB1I,MAAK2F,OAAQ8C,GAAcF,EAAK/H,UAEhCR,MAAK2F,OAAO7D,KAAMyG,EAAK/H,KAIzB,OADAR,MAAK2I,UAAWJ,EAAK/H,MACd+H,EAAK/H,MAGdH,EAAMuI,YAAc,WAClB5I,KAAKwI,YAAa,EAClBxI,KAAK6E,eACE7E,MAAKwI,YAGdnI,EAAMqI,eAAiB,WACrB,MAAO1I,MAAK8H,WAAW,cAAgB,UAAY,cASrDzH,EAAMsI,UAAY,SAAUnI,GAC1BR,KAAKoI,KAAO5D,KAAKqE,IAAKrI,EAAKP,EAAIO,EAAKL,MAAOH,KAAKoI,MAChDpI,KAAKmI,KAAO3D,KAAKqE,IAAKrI,EAAKN,EAAIM,EAAKJ,OAAQJ,KAAKmI,OAQnD9H,EAAMiF,aAAe,SAAUwD,EAAMtI,GACnC,GAAIyF,GAAOZ,EAASyD,GAChBC,EAAI9C,EAAK+C,WACTC,EAAIhD,EAAKiD,aAGRH,GAAKE,KACRF,EAAI/I,KAAKmJ,iBAAkBJ,EAAG/I,KAAKoJ,aACnCH,EAAIjJ,KAAKmJ,iBAAkBF,EAAGjJ,KAAKqJ,YAGrC7I,EAAKL,MAAQqE,KAAK8E,IAAKP,EAAG/I,KAAK2F,OAAOxF,OACtCK,EAAKJ,OAASoE,KAAK8E,IAAKL,EAAGjJ,KAAK2F,OAAOvF,SASzCC,EAAM8I,iBAAmB,SAAUI,EAAaC,GAE9C,IAAMA,EACJ,MAAOD,GAAcvJ,KAAKiI,MAE5BuB,IAAYxJ,KAAKiI,MAEjB,IAAIwB,GAAYF,EAAcC,EAC1BE,EAAaD,GAAyB,EAAZA,EAAgB,QAAU,MAExD,OADAF,GAAc/E,KAAMkF,GAAcH,EAAcC,GAAaA,GAI/DnJ,EAAMsJ,kBAAoB,WACxB,MAAK3J,MAAK8H,WAAW,eAEjB3H,MAAOH,KAAKoI,KAAOpI,KAAKiI,SAIxB7H,OAAQJ,KAAKmI,KAAOnI,KAAKiI,SAY/B5H,EAAMuJ,aAAe,SAAUd,GAE7B,GACItI,GADA+H,EAAOvI,KAAK6J,QAASf,EAEzB,IAAKP,GAAQA,EAAKxD,UAChBvE,EAAO+H,EAAK/H,SACP,CACL,GAAIsJ,GAAS9J,KAAK+J,kBAAmBjB,EACrCtI,GAAO,GAAIZ,IACTK,EAAGD,KAAK8H,WAAW,cAAgBgC,EAAOrC,KAAOqC,EAAOE,MACxD9J,EAAGF,KAAK8H,WAAW,aAAegC,EAAOpC,IAAMoC,EAAOG,SAI1DjK,KAAKsF,aAAcwD,EAAMtI,GAEzBR,KAAK2F,OAAOtD,OAAQ7B,GACpBR,KAAK2I,UAAWnI,IAalBH,EAAM6J,oBAAsB,WAC1B,GAAIvI,GAAS3B,KAAK8H,WAAW,cAAgBxB,EAAmBD,CAChErG,MAAKmK,MAAMtH,KAAMlB,IAYnBtB,EAAM+J,IAAM,SAAUtB,EAAM7I,EAAGC,GAC7B,GAAIqI,GAAOvI,KAAK6J,QAASf,EACnBP,KAKNvI,KAAKqK,MAAO9B,EAAKnD,SAEjBmD,EAAKrD,gBACLlF,KAAKsK,mBAAoB/B,GAEzBtI,EAAUsK,SAANtK,EAAkBsI,EAAK/H,KAAKP,EAAGA,EACnCC,EAAUqK,SAANrK,EAAkBqI,EAAK/H,KAAKN,EAAGA,EAEnCF,KAAKwK,MAAOjC,EAAMtI,EAAGC,GACrBF,KAAKyK,eAAgBlC,GACrBA,EAAKjE,OAAQiE,EAAK/H,KAAKP,EAAGsI,EAAK/H,KAAKN,GAEpCF,KAAK4I,cAEL5I,KAAK0K,QAASnC,EAAKnD,SACnBpF,KAAKkK,sBACL3B,EAAKhD,mBAQPlF,EAAMoK,eAAiB,SAAUlC,GAG/B,QAASoC,KACPC,IACc,GAATA,GAGLjE,EAAMkE,cAAe,cAAe,MAAQtC,IAP9C,GAAI5B,GAAQ3G,KACR4K,EAAQ,CASZrC,GAAKuC,KAAM,SAAUH,GAErB3K,KAAK8K,KAAM,iBAAkBH,IAM/BtK,EAAM0K,OAAS,WAGP/K,KAAKgL,eAAkBhL,KAAKiL,sBAI7BjL,KAAKkL,QAAQC,mBAChBnL,KAAKoL,2BAELpL,KAAK6E,WAQTxE,EAAM4K,kBAAoB,WACxB,GAAIhF,GAAOZ,EAASrF,KAAKoF,SACrBiG,EAAYrL,KAAK8H,WAAW,cAAgB,cAAgB,YAChE,OAAO7B,GAAMoF,IAAerL,KAAKiG,KAAMoF,IAGzChL,EAAM+K,yBAA2B,WAC/B,GAAIjB,GAAQnK,KAAKsL,mBAAoBtL,KAAKmK,OAEtCoB,EAAevL,KAAK8H,WAAW,cAC/B0D,EAAQD,EAAe,IAAM,IAC7BE,EAAUF,EAAe,SAAW,QACpCG,EAAcH,EAAe,YAAc,cAC3CF,EAAYE,EAAe,cAAgB,aAG3CI,EAAkB3L,KAAM0L,EAG5B,IAFAC,EAAkBA,GAAmBA,EAAkB3L,KAAKiI,OAErC,CACrBjI,KAAK6H,kBACL,IAAI+D,GAAiB5L,KAAM0L,GAAgB1L,KAAKiI,MAChDkC,GAAM0B,QAAS,SAAUtD,GACvB,GAAIuD,GAAMtH,KAAKuH,MAAOxD,EAAK/H,KAAMgL,GAAUG,EAC3CpD,GAAK/H,KAAMgL,GAAUM,EAAMF,QAExB,CACL,GAAII,GAAc3G,EAASrF,KAAKoF,SAAWiG,GAAcrL,KAAKiI,OAC1DgE,EAAejM,KAAK2F,OAAQ8F,EAChCtB,GAAM0B,QAAS,SAAUtD,GACvBA,EAAK/H,KAAMgL,GAAYjD,EAAK/H,KAAMgL,GAAUS,EAAiBD,IAIjEhM,KAAK4I,eASPvI,EAAMyG,cAAgB,SAAUgC,GAC9B,GAAM9I,KAAK0G,UAAX,CAGA1G,KAAKqK,MAAOvB,EAEZ,IAAIP,GAAOvI,KAAK6J,QAASf,EACnBP,KAINA,EAAKrD,gBACLqD,EAAK1C,sBACL7F,KAAK8E,gBACL9E,KAAKsK,mBAAoB/B,MAG3BlI,EAAMiK,mBAAqB,SAAU4B,GACnClM,KAAKyG,YAAYjF,QAGjBxB,KAAKmM,kBACL,IAAIC,GAAepM,KAAK8H,WAAW,cAC/BuE,EAAcrM,KAAK8H,WAAW,YAClC9H,MAAKsM,OAAOT,QAAS,SAAUxB,GAE7B,GAAI9B,GAAOvI,KAAK6J,QAASQ,EACzB,KAAK9B,IAAQA,EAAKxD,UAAlB,CAGA,GAAI+E,GAAS9J,KAAK+J,kBAAmBM,GACjC7J,EAAO,GAAIZ,IACbK,EAAGmM,EAAetC,EAAOrC,KAAOqC,EAAOE,MACvC9J,EAAGmM,EAAcvC,EAAOpC,IAAMoC,EAAOG,QAEvCjK,MAAKsF,aAAc+E,EAAO7J,GAE1BR,KAAKyG,YAAYpE,OAAQ7B,KACxBR,KAGH,IAAIuL,GAAevL,KAAK8H,WAAW,cAC/B4D,EAAcH,EAAe,YAAc,cAC3CE,EAAUF,EAAe,SAAW,OAExCvL,MAAKuM,mBACLvM,KAAKwM,eACL,IAAIC,GACAC,EAAU1M,KAAM0L,EAGpB,IAFAgB,EAAUA,GAAWA,EAAU1M,KAAKiI,OAErB,CACb,GAAI0E,GAAcnI,KAAKoI,KAAMV,EAAS1L,KAAMiL,GAAYiB,GACpDG,EAAOrI,KAAKsI,OAAS9M,KAAKyG,YAAagF,GAAYzL,KAAKiI,QAAWyE,EACvED,IAAeI,EAAOF,GAAgBD,CAEtC,KAAM,GAAI3K,GAAE,EAAO8K,EAAJ9K,EAAUA,IACvB/B,KAAK+M,gBAAiBhL,EAAI2K,EAAS,EAAGD,OAGxCA,GAAezM,KAAKyG,YAAagF,GAAYzL,KAAKiI,OAAWiE,EAAS1L,KAAMiL,GAC5EzL,KAAK+M,gBAAiB,EAAG,EAAGN,EAI9B,IAAItC,GAAQnK,KAAKsL,mBAAoBtL,KAAKmK,OACtC1B,EAAazI,KAAK0I,gBACtByB,GAAM0B,QAAS,SAAUtD,GACvB,GAAI/H,GAAO+H,EAAK/H,IAChBR,MAAKsF,aAAciD,EAAKnD,QAAS5E,GACjCR,KAAKyG,YAAagC,GAAcjI,GAGhCR,KAAK+M,gBAAiBvM,EAAKP,EAAGO,EAAKN,EAAGuM,EAEtC,IAAIO,GAAUzB,EAAe/K,EAAKP,EAAIO,EAAKL,MAAQK,EAAKP,EACpDgN,EAAU1B,EAAe/K,EAAKN,EAAIM,EAAKN,EAAIM,EAAKJ,MAGpD,IAFAJ,KAAK+M,gBAAiBC,EAASC,EAASR,GAEnCC,EAGH,IAAM,GADFQ,GAAU1I,KAAKuH,MAAOvL,EAAMiL,GAAYiB,GAClC3K,EAAE,EAAOmL,EAAJnL,EAAaA,IAAM,CAChC,GAAIoL,GAAO5B,EAAeyB,EAAUxM,EAAKP,EAAIyM,EAAU3K,EACnDqL,EAAO7B,EAAe/K,EAAKN,EAAIwM,EAAU3K,EAAIkL,CACjDjN,MAAK+M,gBAAiBI,EAAMC,EAAMX,KAGrCzM,OAILK,EAAM0M,gBAAkB,SAAU9M,EAAGC,EAAGuM,GACtC,GAAIY,GAAarN,KAAK8H,WAAW,cAAgB5H,EAAID,CACrD,MAAoB,IAAfoN,GAAoBA,EAAaZ,GAAtC,CAIA,GAAIa,GAAMrN,EAAI,IAAMC,EAChBqN,EAAgD,IAAvCvN,KAAKuM,gBAAgBiB,QAASF,EACtCC,KAGLvN,KAAKuM,gBAAgBpL,KAAMmM,GAC3BtN,KAAKwM,aAAarL,MAAOlB,EAAGA,EAAGC,EAAGA,OAKpCG,EAAMmK,MAAQ,SAAUjC,EAAMtI,EAAGC,GAC/B,GAAIuN,GACAC,EAAc3F,EAAAA,EACdrD,GAAazE,EAAGA,EAAGC,EAAGA,EAC1BF,MAAKwM,aAAaX,QAAS,SAAU8B,GACnC,GAAIC,GAAWrH,EAAaoH,EAAQjJ,EACpBgJ,GAAXE,IACHH,EAAgBE,EAChBD,EAAcE,KAGlBrF,EAAK/H,KAAKP,EAAIwN,EAAcxN,EAC5BsI,EAAK/H,KAAKN,EAAIuN,EAAcvN,EAW9B,IAAI2N,GAAqB,GAQzBxN,GAAM2G,aAAe,SAAU8B,EAAM7I,EAAGC,GAUtC,QAAS4N,KACPnH,EAAM6D,MAAOjC,EAAMtI,EAAGC,GACtBqI,EAAKrC,0BACLS,EAAM9B,SAZR,GAAI0D,GAAOvI,KAAK0G,WAAa1G,KAAK6J,QAASf,EAC3C,IAAMP,EAAN,CAIAtI,GAAKD,KAAKiG,KAAK8H,YACf7N,GAAKF,KAAKiG,KAAK+H,UAEf,IAAIrH,GAAQ3G,KAQRiO,EAAM,GAAIC,KACTlO,MAAKmO,eAAiBF,EAAMjO,KAAKmO,cAAgBN,GACpDO,aAAcpO,KAAKqO,aACnBrO,KAAKqO,YAAcC,WAAYR,EAAQD,KAEvCC,IACA9N,KAAKmO,cAAgBF,KAUzB5N,EAAM6G,YAAc,SAAU4B,GAW5B,QAASyF,KACPC,IACsB,GAAjBA,IAILjG,EAAKnD,QAAQqJ,UAAUC,OAAO,4BAC9BnG,EAAKnC,sBACLO,EAAMkE,cAAe,qBAAsB,MAAQtC,KAlBrD,GAAIA,GAAOvI,KAAK0G,WAAa1G,KAAK6J,QAASf,EAC3C,IAAMP,EAAN,CAIA6F,aAAcpO,KAAKqO,aACnB9F,EAAKnD,QAAQqJ,UAAUE,IAAI,2BAE3B,IAAIH,GAAgB,EAChB7H,EAAQ3G,IAYZuI,GAAKuC,KAAM,SAAUyD,GACrBvO,KAAK8K,KAAM,iBAAkByD,GAC7BhG,EAAKjE,OAAQiE,EAAK/H,KAAKP,EAAGsI,EAAK/H,KAAKN,GACpCF,KAAK6E,SACL7E,KAAK8E,cAAgBN,KAAKqE,IAAK,EAAG7I,KAAK8E,cAAgB,GACvD9E,KAAKkK,sBACL3B,EAAKhD,iBACLvF,KAAK0K,QAASnC,EAAKnD,WAOrB/E,EAAMuO,sBAAwB,SAAUC,GACtC7O,KAAK8O,uBAAwBD,EAAS,OAGxCxO,EAAM0O,wBAA0B,SAAUF,GACxC7O,KAAK8O,uBAAwBD,EAAS,QAGxCxO,EAAMyO,uBAAyB,SAAUD,EAASG,GAChD,GAAIC,GAAWjP,KAAK4G,iBACpBiI,GAASG,GAAU,YAAaC,EAASpI,WACzCgI,EAASG,GAAU,WAAYC,EAASlI,UACxC8H,EAASG,GAAU,UAAWC,EAAShI,UAOzC5G,EAAM6O,sBAAwB,SAAUC,GACtCnP,KAAKoP,uBAAwBD,EAAQ,OAGvC9O,EAAMgP,wBAA0B,SAAUF,GACxCnP,KAAKoP,uBAAwBD,EAAQ,QAGvC9O,EAAM+O,uBAAyB,SAAUD,EAAQH,GAC/C,GAAIC,GAAWjP,KAAKmH,iBACpBgI,GACIH,GAAU,YAAaC,EAAS7H,OAChC4H,GAAU,OAAQC,EAASzH,MAC3BwH,GAAU,WAAYC,EAAStH,MAKrC,IAAI2H,GAAWjP,EAAMkP,OAYrB,OAXAlP,GAAMkP,QAAU,WACdD,EAAS5M,MAAO1C,KAAM+D,WAEtB/D,KAAK0G,WAAY,GAKnB/G,EAAQC,KAAOA,EACfD,EAAQ2B,OAASA,EAEV3B,IAWL,SAAUN,EAAQC,GAGI,kBAAVC,SAAwBA,OAAOC,IAEzCD,QACI,yBACA,sBAEFD,GACyB,gBAAVG,SAAsBA,OAAOC,QAE9CD,OAAOC,QAAUJ,EACf+B,QAAQ,iCACRA,QAAQ,YAIV/B,EACED,EAAOmQ,QAAQC,WACfpQ,EAAOM,UAIVN,OAAQ,SAAiBoQ,EAAY9P,GAItC,GAAI+P,GAAcD,EAAWxL,OAAO,WAChC5D,EAAQqP,EAAYpP,UAEpBqP,GACF5F,mBAAmB,EACnB1B,iBAAiB,EAInB,KAAM,GAAI2G,KAAUrP,GAAQW,UAEpBqP,EAAiBX,KACrB3O,EAAO2O,GAAWrP,EAAQW,UAAW0O,GAKzC,IAAIpH,GAAevH,EAAMuH,YACzBvH,GAAMuH,aAAe,WACnB5H,KAAK2F,OAAS3F,KAAK2F,QAAU,GAAIhG,GAAQ2B,OACzCtB,KAAKyG,YAAczG,KAAKyG,aAAe,GAAI9G,GAAQ2B,OACnDsG,EAAalF,MAAO1C,KAAM+D,WAG5B,IAAIuE,GAAyBjI,EAAMiI,sBACnCjI,GAAMiI,uBAAyB,SAAUC,GAGvC,MADAA,GAAK/H,KAAO+H,EAAK/H,MAAQ,GAAIb,GAAQC,KAC9B0I,EAAuBlE,KAAMpE,KAAMuI,GAI5C,IAAIqH,GAAqBvP,EAAM4K,iBAC/B5K,GAAM4K,kBAAoB,WACxB,MAAKjL,MAAK8H,WAAW,cACZ9H,KAAK6P,4BAELD,EAAmBxL,KAAMpE,MAKpC,IAAI8H,GAAazH,EAAMyH,UASvB,OARAzH,GAAMyH,WAAa,SAAUgI,GAC3B,MAAe,cAAVA,EACkCvF,SAA9BvK,KAAKkL,QAAQK,aAClBvL,KAAKkL,QAAQK,aAAevL,KAAKkL,QAAQ6E,WAEtCjI,EAAWpF,MAAO1C,KAAKgQ,QAASjM,YAGlC2L","file":"packery.js","sourcesContent":["/*!\n * Packery layout mode PACKAGED v2.0.0\n * sub-classes Packery\n */\n\n/**\n * Rect\n * low-level utility class for basic geometry\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/rect',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.Packery = window.Packery || {};\n    window.Packery.Rect = factory();\n  }\n\n}( window, function factory() {\n\n\n// -------------------------- Rect -------------------------- //\n\nfunction Rect( props ) {\n  // extend properties from defaults\n  for ( var prop in Rect.defaults ) {\n    this[ prop ] = Rect.defaults[ prop ];\n  }\n\n  for ( prop in props ) {\n    this[ prop ] = props[ prop ];\n  }\n\n}\n\nRect.defaults = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0\n};\n\nvar proto = Rect.prototype;\n\n/**\n * Determines whether or not this rectangle wholly encloses another rectangle or point.\n * @param {Rect} rect\n * @returns {Boolean}\n**/\nproto.contains = function( rect ) {\n  // points don't have width or height\n  var otherWidth = rect.width || 0;\n  var otherHeight = rect.height || 0;\n  return this.x <= rect.x &&\n    this.y <= rect.y &&\n    this.x + this.width >= rect.x + otherWidth &&\n    this.y + this.height >= rect.y + otherHeight;\n};\n\n/**\n * Determines whether or not the rectangle intersects with another.\n * @param {Rect} rect\n * @returns {Boolean}\n**/\nproto.overlaps = function( rect ) {\n  var thisRight = this.x + this.width;\n  var thisBottom = this.y + this.height;\n  var rectRight = rect.x + rect.width;\n  var rectBottom = rect.y + rect.height;\n\n  // http://stackoverflow.com/a/306332\n  return this.x < rectRight &&\n    thisRight > rect.x &&\n    this.y < rectBottom &&\n    thisBottom > rect.y;\n};\n\n/**\n * @param {Rect} rect - the overlapping rect\n * @returns {Array} freeRects - rects representing the area around the rect\n**/\nproto.getMaximalFreeRects = function( rect ) {\n\n  // if no intersection, return false\n  if ( !this.overlaps( rect ) ) {\n    return false;\n  }\n\n  var freeRects = [];\n  var freeRect;\n\n  var thisRight = this.x + this.width;\n  var thisBottom = this.y + this.height;\n  var rectRight = rect.x + rect.width;\n  var rectBottom = rect.y + rect.height;\n\n  // top\n  if ( this.y < rect.y ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: rect.y - this.y\n    });\n    freeRects.push( freeRect );\n  }\n\n  // right\n  if ( thisRight > rectRight ) {\n    freeRect = new Rect({\n      x: rectRight,\n      y: this.y,\n      width: thisRight - rectRight,\n      height: this.height\n    });\n    freeRects.push( freeRect );\n  }\n\n  // bottom\n  if ( thisBottom > rectBottom ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: rectBottom,\n      width: this.width,\n      height: thisBottom - rectBottom\n    });\n    freeRects.push( freeRect );\n  }\n\n  // left\n  if ( this.x < rect.x ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: this.y,\n      width: rect.x - this.x,\n      height: this.height\n    });\n    freeRects.push( freeRect );\n  }\n\n  return freeRects;\n};\n\nproto.canFit = function( rect ) {\n  return this.width >= rect.width && this.height >= rect.height;\n};\n\nreturn Rect;\n\n}));\n\n/**\n * Packer\n * bin-packing algorithm\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/packer',[ './rect' ], factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('./rect')\n    );\n  } else {\n    // browser global\n    var Packery = window.Packery = window.Packery || {};\n    Packery.Packer = factory( Packery.Rect );\n  }\n\n}( window, function factory( Rect ) {\n\n\n// -------------------------- Packer -------------------------- //\n\n/**\n * @param {Number} width\n * @param {Number} height\n * @param {String} sortDirection\n *   topLeft for vertical, leftTop for horizontal\n */\nfunction Packer( width, height, sortDirection ) {\n  this.width = width || 0;\n  this.height = height || 0;\n  this.sortDirection = sortDirection || 'downwardLeftToRight';\n\n  this.reset();\n}\n\nvar proto = Packer.prototype;\n\nproto.reset = function() {\n  this.spaces = [];\n\n  var initialSpace = new Rect({\n    x: 0,\n    y: 0,\n    width: this.width,\n    height: this.height\n  });\n\n  this.spaces.push( initialSpace );\n  // set sorter\n  this.sorter = sorters[ this.sortDirection ] || sorters.downwardLeftToRight;\n};\n\n// change x and y of rect to fit with in Packer's available spaces\nproto.pack = function( rect ) {\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    if ( space.canFit( rect ) ) {\n      this.placeInSpace( rect, space );\n      break;\n    }\n  }\n};\n\nproto.columnPack = function( rect ) {\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    var canFitInSpaceColumn = space.x <= rect.x &&\n      space.x + space.width >= rect.x + rect.width &&\n      space.height >= rect.height - 0.01; // fudge number for rounding error\n    if ( canFitInSpaceColumn ) {\n      rect.y = space.y;\n      this.placed( rect );\n      break;\n    }\n  }\n};\n\nproto.rowPack = function( rect ) {\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    var canFitInSpaceRow = space.y <= rect.y &&\n      space.y + space.height >= rect.y + rect.height &&\n      space.width >= rect.width - 0.01; // fudge number for rounding error\n    if ( canFitInSpaceRow ) {\n      rect.x = space.x;\n      this.placed( rect );\n      break;\n    }\n  }\n};\n\nproto.placeInSpace = function( rect, space ) {\n  // place rect in space\n  rect.x = space.x;\n  rect.y = space.y;\n\n  this.placed( rect );\n};\n\n// update spaces with placed rect\nproto.placed = function( rect ) {\n  // update spaces\n  var revisedSpaces = [];\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    var newSpaces = space.getMaximalFreeRects( rect );\n    // add either the original space or the new spaces to the revised spaces\n    if ( newSpaces ) {\n      revisedSpaces.push.apply( revisedSpaces, newSpaces );\n    } else {\n      revisedSpaces.push( space );\n    }\n  }\n\n  this.spaces = revisedSpaces;\n\n  this.mergeSortSpaces();\n};\n\nproto.mergeSortSpaces = function() {\n  // remove redundant spaces\n  Packer.mergeRects( this.spaces );\n  this.spaces.sort( this.sorter );\n};\n\n// add a space back\nproto.addSpace = function( rect ) {\n  this.spaces.push( rect );\n  this.mergeSortSpaces();\n};\n\n// -------------------------- utility functions -------------------------- //\n\n/**\n * Remove redundant rectangle from array of rectangles\n * @param {Array} rects: an array of Rects\n * @returns {Array} rects: an array of Rects\n**/\nPacker.mergeRects = function( rects ) {\n  var i = 0;\n  var rect = rects[i];\n\n  rectLoop:\n  while ( rect ) {\n    var j = 0;\n    var compareRect = rects[ i + j ];\n\n    while ( compareRect ) {\n      if  ( compareRect == rect ) {\n        j++; // next\n      } else if ( compareRect.contains( rect ) ) {\n        // remove rect\n        rects.splice( i, 1 );\n        rect = rects[i]; // set next rect\n        continue rectLoop; // bail on compareLoop\n      } else if ( rect.contains( compareRect ) ) {\n        // remove compareRect\n        rects.splice( i + j, 1 );\n      } else {\n        j++;\n      }\n      compareRect = rects[ i + j ]; // set next compareRect\n    }\n    i++;\n    rect = rects[i];\n  }\n\n  return rects;\n};\n\n\n// -------------------------- sorters -------------------------- //\n\n// functions for sorting rects in order\nvar sorters = {\n  // top down, then left to right\n  downwardLeftToRight: function( a, b ) {\n    return a.y - b.y || a.x - b.x;\n  },\n  // left to right, then top down\n  rightwardTopToBottom: function( a, b ) {\n    return a.x - b.x || a.y - b.y;\n  }\n};\n\n\n// --------------------------  -------------------------- //\n\nreturn Packer;\n\n}));\n\n/**\n * Packery Item Element\n**/\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/item',[\n        'outlayer/outlayer',\n        './rect'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('./rect')\n    );\n  } else {\n    // browser global\n    window.Packery.Item = factory(\n      window.Outlayer,\n      window.Packery.Rect\n    );\n  }\n\n}( window, function factory( Outlayer, Rect ) {\n\n\n// -------------------------- Item -------------------------- //\n\nvar docElemStyle = document.documentElement.style;\n\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\n// sub-class Item\nvar Item = function PackeryItem() {\n  Outlayer.Item.apply( this, arguments );\n};\nvar proto = Item.prototype = Object.create( Outlayer.Item.prototype );\n\nvar __create = proto._create;\nproto._create = function() {\n  // call default _create logic\n  __create.call( this );\n  this.rect = new Rect();\n};\n\nvar _moveTo = proto.moveTo;\nproto.moveTo = function( x, y ) {\n  // don't shift 1px while dragging\n  var dx = Math.abs( this.position.x - x );\n  var dy = Math.abs( this.position.y - y );\n\n  var canHackGoTo = this.layout.dragItemCount && !this.isPlacing &&\n    !this.isTransitioning && dx < 1 && dy < 1;\n  if ( canHackGoTo ) {\n    this.goTo( x, y );\n    return;\n  }\n  _moveTo.apply( this, arguments );\n};\n\n// -------------------------- placing -------------------------- //\n\nproto.enablePlacing = function() {\n  this.removeTransitionStyles();\n  // remove transform property from transition\n  if ( this.isTransitioning && transformProperty ) {\n    this.element.style[ transformProperty ] = 'none';\n  }\n  this.isTransitioning = false;\n  this.getSize();\n  this.layout._setRectSize( this.element, this.rect );\n  this.isPlacing = true;\n};\n\nproto.disablePlacing = function() {\n  this.isPlacing = false;\n};\n\n// -----  ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // add space back to packer\n  this.layout.packer.addSpace( this.rect );\n  this.emitEvent( 'remove', [ this ] );\n};\n\n// ----- dropPlaceholder ----- //\n\nproto.showDropPlaceholder = function() {\n  var dropPlaceholder = this.dropPlaceholder;\n  if ( !dropPlaceholder ) {\n    // create dropPlaceholder\n    dropPlaceholder = this.dropPlaceholder = document.createElement('div');\n    dropPlaceholder.className = 'packery-drop-placeholder';\n    dropPlaceholder.style.position = 'absolute';\n  }\n\n  dropPlaceholder.style.width = this.size.width + 'px';\n  dropPlaceholder.style.height = this.size.height + 'px';\n  this.positionDropPlaceholder();\n  this.layout.element.appendChild( dropPlaceholder );\n};\n\nproto.positionDropPlaceholder = function() {\n  this.dropPlaceholder.style[ transformProperty ] = 'translate(' +\n    this.rect.x + 'px, ' + this.rect.y + 'px)';\n};\n\nproto.hideDropPlaceholder = function() {\n  this.layout.element.removeChild( this.dropPlaceholder );\n};\n\n// -----  ----- //\n\nreturn Item;\n\n}));\n\n/*!\n * Packery v2.0.0\n * Gapless, draggable grid layouts\n *\n * Licensed GPLv3 for open source use\n * or Packery Commercial License for commercial use\n *\n * http://packery.metafizzy.co\n * Copyright 2016 Metafizzy\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/packery',[\n        'get-size/get-size',\n        'outlayer/outlayer',\n        './rect',\n        './packer',\n        './item'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer'),\n      require('./rect'),\n      require('./packer'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Packery = factory(\n      window.getSize,\n      window.Outlayer,\n      window.Packery.Rect,\n      window.Packery.Packer,\n      window.Packery.Item\n    );\n  }\n\n}( window, function factory( getSize, Outlayer, Rect, Packer, Item ) {\n\n\n// ----- Rect ----- //\n\n// allow for pixel rounding errors IE8-IE11 & Firefox; #227\nRect.prototype.canFit = function( rect ) {\n  return this.width >= rect.width - 1 && this.height >= rect.height - 1;\n};\n\n// -------------------------- Packery -------------------------- //\n\n// create an Outlayer layout class\nvar Packery = Outlayer.create('packery');\nPackery.Item = Item;\n\nvar proto = Packery.prototype;\n\nproto._create = function() {\n  // call super\n  Outlayer.prototype._create.call( this );\n\n  // initial properties\n  this.packer = new Packer();\n  // packer for drop targets\n  this.shiftPacker = new Packer();\n  this.isEnabled = true;\n\n  this.dragItemCount = 0;\n\n  // create drag handlers\n  var _this = this;\n  this.handleDraggabilly = {\n    dragStart: function() {\n      _this.itemDragStart( this.element );\n    },\n    dragMove: function() {\n      _this.itemDragMove( this.element, this.position.x, this.position.y );\n    },\n    dragEnd: function() {\n      _this.itemDragEnd( this.element );\n    }\n  };\n\n  this.handleUIDraggable = {\n    start: function handleUIDraggableStart( event, ui ) {\n      // HTML5 may trigger dragstart, dismiss HTML5 dragging\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragStart( event.currentTarget );\n    },\n    drag: function handleUIDraggableDrag( event, ui ) {\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragMove( event.currentTarget, ui.position.left, ui.position.top );\n    },\n    stop: function handleUIDraggableStop( event, ui ) {\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragEnd( event.currentTarget );\n    }\n  };\n\n};\n\n\n// ----- init & layout ----- //\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n\n  this._getMeasurements();\n\n  // reset packer\n  var width, height, sortDirection;\n  // packer settings, if horizontal or vertical\n  if ( this._getOption('horizontal') ) {\n    width = Infinity;\n    height = this.size.innerHeight + this.gutter;\n    sortDirection = 'rightwardTopToBottom';\n  } else {\n    width = this.size.innerWidth + this.gutter;\n    height = Infinity;\n    sortDirection = 'downwardLeftToRight';\n  }\n\n  this.packer.width = this.shiftPacker.width = width;\n  this.packer.height = this.shiftPacker.height = height;\n  this.packer.sortDirection = this.shiftPacker.sortDirection = sortDirection;\n\n  this.packer.reset();\n\n  // layout\n  this.maxY = 0;\n  this.maxX = 0;\n};\n\n/**\n * update columnWidth, rowHeight, & gutter\n * @private\n */\nproto._getMeasurements = function() {\n  this._getMeasurement( 'columnWidth', 'width' );\n  this._getMeasurement( 'rowHeight', 'height' );\n  this._getMeasurement( 'gutter', 'width' );\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  this._setRectSize( item.element, item.rect );\n  if ( this.isShifting || this.dragItemCount > 0 ) {\n    var packMethod = this._getPackMethod();\n    this.packer[ packMethod ]( item.rect );\n  } else {\n    this.packer.pack( item.rect );\n  }\n\n  this._setMaxXY( item.rect );\n  return item.rect;\n};\n\nproto.shiftLayout = function() {\n  this.isShifting = true;\n  this.layout();\n  delete this.isShifting;\n};\n\nproto._getPackMethod = function() {\n  return this._getOption('horizontal') ? 'rowPack' : 'columnPack';\n};\n\n\n/**\n * set max X and Y value, for size of container\n * @param {Packery.Rect} rect\n * @private\n */\nproto._setMaxXY = function( rect ) {\n  this.maxX = Math.max( rect.x + rect.width, this.maxX );\n  this.maxY = Math.max( rect.y + rect.height, this.maxY );\n};\n\n/**\n * set the width and height of a rect, applying columnWidth and rowHeight\n * @param {Element} elem\n * @param {Packery.Rect} rect\n */\nproto._setRectSize = function( elem, rect ) {\n  var size = getSize( elem );\n  var w = size.outerWidth;\n  var h = size.outerHeight;\n  // size for columnWidth and rowHeight, if available\n  // only check if size is non-zero, #177\n  if ( w || h ) {\n    w = this._applyGridGutter( w, this.columnWidth );\n    h = this._applyGridGutter( h, this.rowHeight );\n  }\n  // rect must fit in packer\n  rect.width = Math.min( w, this.packer.width );\n  rect.height = Math.min( h, this.packer.height );\n};\n\n/**\n * fits item to columnWidth/rowHeight and adds gutter\n * @param {Number} measurement - item width or height\n * @param {Number} gridSize - columnWidth or rowHeight\n * @returns measurement\n */\nproto._applyGridGutter = function( measurement, gridSize ) {\n  // just add gutter if no gridSize\n  if ( !gridSize ) {\n    return measurement + this.gutter;\n  }\n  gridSize += this.gutter;\n  // fit item to columnWidth/rowHeight\n  var remainder = measurement % gridSize;\n  var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n  measurement = Math[ mathMethod ]( measurement / gridSize ) * gridSize;\n  return measurement;\n};\n\nproto._getContainerSize = function() {\n  if ( this._getOption('horizontal') ) {\n    return {\n      width: this.maxX - this.gutter\n    };\n  } else {\n    return {\n      height: this.maxY - this.gutter\n    };\n  }\n};\n\n\n// -------------------------- stamp -------------------------- //\n\n/**\n * makes space for element\n * @param {Element} elem\n */\nproto._manageStamp = function( elem ) {\n\n  var item = this.getItem( elem );\n  var rect;\n  if ( item && item.isPlacing ) {\n    rect = item.rect;\n  } else {\n    var offset = this._getElementOffset( elem );\n    rect = new Rect({\n      x: this._getOption('originLeft') ? offset.left : offset.right,\n      y: this._getOption('originTop') ? offset.top : offset.bottom\n    });\n  }\n\n  this._setRectSize( elem, rect );\n  // save its space in the packer\n  this.packer.placed( rect );\n  this._setMaxXY( rect );\n};\n\n// -------------------------- methods -------------------------- //\n\nfunction verticalSorter( a, b ) {\n  return a.position.y - b.position.y || a.position.x - b.position.x;\n}\n\nfunction horizontalSorter( a, b ) {\n  return a.position.x - b.position.x || a.position.y - b.position.y;\n}\n\nproto.sortItemsByPosition = function() {\n  var sorter = this._getOption('horizontal') ? horizontalSorter : verticalSorter;\n  this.items.sort( sorter );\n};\n\n/**\n * Fit item element in its current position\n * Packery will position elements around it\n * useful for expanding elements\n *\n * @param {Element} elem\n * @param {Number} x - horizontal destination position, optional\n * @param {Number} y - vertical destination position, optional\n */\nproto.fit = function( elem, x, y ) {\n  var item = this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  // stamp item to get it out of layout\n  this.stamp( item.element );\n  // set placing flag\n  item.enablePlacing();\n  this.updateShiftTargets( item );\n  // fall back to current position for fitting\n  x = x === undefined ? item.rect.x: x;\n  y = y === undefined ? item.rect.y: y;\n  // position it best at its destination\n  this.shift( item, x, y );\n  this._bindFitEvents( item );\n  item.moveTo( item.rect.x, item.rect.y );\n  // layout everything else\n  this.shiftLayout();\n  // return back to regularly scheduled programming\n  this.unstamp( item.element );\n  this.sortItemsByPosition();\n  item.disablePlacing();\n};\n\n/**\n * emit event when item is fit and other items are laid out\n * @param {Packery.Item} item\n * @private\n */\nproto._bindFitEvents = function( item ) {\n  var _this = this;\n  var ticks = 0;\n  function onLayout() {\n    ticks++;\n    if ( ticks != 2 ) {\n      return;\n    }\n    _this.dispatchEvent( 'fitComplete', null, [ item ] );\n  }\n  // when item is laid out\n  item.once( 'layout', onLayout );\n  // when all items are laid out\n  this.once( 'layoutComplete', onLayout );\n};\n\n// -------------------------- resize -------------------------- //\n\n// debounced, layout on resize\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #285, outlayer#9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  if ( this.options.shiftPercentResize ) {\n    this.resizeShiftPercentLayout();\n  } else {\n    this.layout();\n  }\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  var innerSize = this._getOption('horizontal') ? 'innerHeight' : 'innerWidth';\n  return size[ innerSize ] != this.size[ innerSize ];\n};\n\nproto.resizeShiftPercentLayout = function() {\n  var items = this._getItemsForLayout( this.items );\n\n  var isHorizontal = this._getOption('horizontal');\n  var coord = isHorizontal ? 'y' : 'x';\n  var measure = isHorizontal ? 'height' : 'width';\n  var segmentName = isHorizontal ? 'rowHeight' : 'columnWidth';\n  var innerSize = isHorizontal ? 'innerHeight' : 'innerWidth';\n\n  // proportional re-align items\n  var previousSegment = this[ segmentName ];\n  previousSegment = previousSegment && previousSegment + this.gutter;\n\n  if ( previousSegment ) {\n    this._getMeasurements();\n    var currentSegment = this[ segmentName ] + this.gutter;\n    items.forEach( function( item ) {\n      var seg = Math.round( item.rect[ coord ] / previousSegment );\n      item.rect[ coord ] = seg * currentSegment;\n    });\n  } else {\n    var currentSize = getSize( this.element )[ innerSize ] + this.gutter;\n    var previousSize = this.packer[ measure ];\n    items.forEach( function( item ) {\n      item.rect[ coord ] = ( item.rect[ coord ] / previousSize ) * currentSize;\n    });\n  }\n\n  this.shiftLayout();\n};\n\n// -------------------------- drag -------------------------- //\n\n/**\n * handle an item drag start event\n * @param {Element} elem\n */\nproto.itemDragStart = function( elem ) {\n  if ( !this.isEnabled ) {\n    return;\n  }\n  this.stamp( elem );\n  // this.ignore( elem );\n  var item = this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  item.enablePlacing();\n  item.showDropPlaceholder();\n  this.dragItemCount++;\n  this.updateShiftTargets( item );\n};\n\nproto.updateShiftTargets = function( dropItem ) {\n  this.shiftPacker.reset();\n\n  // pack stamps\n  this._getBoundingRect();\n  var isOriginLeft = this._getOption('originLeft');\n  var isOriginTop = this._getOption('originTop');\n  this.stamps.forEach( function( stamp ) {\n    // ignore dragged item\n    var item = this.getItem( stamp );\n    if ( item && item.isPlacing ) {\n      return;\n    }\n    var offset = this._getElementOffset( stamp );\n    var rect = new Rect({\n      x: isOriginLeft ? offset.left : offset.right,\n      y: isOriginTop ? offset.top : offset.bottom\n    });\n    this._setRectSize( stamp, rect );\n    // save its space in the packer\n    this.shiftPacker.placed( rect );\n  }, this );\n\n  // reset shiftTargets\n  var isHorizontal = this._getOption('horizontal');\n  var segmentName = isHorizontal ? 'rowHeight' : 'columnWidth';\n  var measure = isHorizontal ? 'height' : 'width';\n\n  this.shiftTargetKeys = [];\n  this.shiftTargets = [];\n  var boundsSize;\n  var segment = this[ segmentName ];\n  segment = segment && segment + this.gutter;\n\n  if ( segment ) {\n    var segmentSpan = Math.ceil( dropItem.rect[ measure ] / segment );\n    var segs = Math.floor( ( this.shiftPacker[ measure ] + this.gutter ) / segment );\n    boundsSize = ( segs - segmentSpan ) * segment;\n    // add targets on top\n    for ( var i=0; i < segs; i++ ) {\n      this._addShiftTarget( i * segment, 0, boundsSize );\n    }\n  } else {\n    boundsSize = ( this.shiftPacker[ measure ] + this.gutter ) - dropItem.rect[ measure ];\n    this._addShiftTarget( 0, 0, boundsSize );\n  }\n\n  // pack each item to measure where shiftTargets are\n  var items = this._getItemsForLayout( this.items );\n  var packMethod = this._getPackMethod();\n  items.forEach( function( item ) {\n    var rect = item.rect;\n    this._setRectSize( item.element, rect );\n    this.shiftPacker[ packMethod ]( rect );\n\n    // add top left corner\n    this._addShiftTarget( rect.x, rect.y, boundsSize );\n    // add bottom left / top right corner\n    var cornerX = isHorizontal ? rect.x + rect.width : rect.x;\n    var cornerY = isHorizontal ? rect.y : rect.y + rect.height;\n    this._addShiftTarget( cornerX, cornerY, boundsSize );\n\n    if ( segment ) {\n      // add targets for each column on bottom / row on right\n      var segSpan = Math.round( rect[ measure ] / segment );\n      for ( var i=1; i < segSpan; i++ ) {\n        var segX = isHorizontal ? cornerX : rect.x + segment * i;\n        var segY = isHorizontal ? rect.y + segment * i : cornerY;\n        this._addShiftTarget( segX, segY, boundsSize );\n      }\n    }\n  }, this );\n\n};\n\nproto._addShiftTarget = function( x, y, boundsSize ) {\n  var checkCoord = this._getOption('horizontal') ? y : x;\n  if ( checkCoord !== 0 && checkCoord > boundsSize ) {\n    return;\n  }\n  // create string for a key, easier to keep track of what targets\n  var key = x + ',' + y;\n  var hasKey = this.shiftTargetKeys.indexOf( key ) != -1;\n  if ( hasKey ) {\n    return;\n  }\n  this.shiftTargetKeys.push( key );\n  this.shiftTargets.push({ x: x, y: y });\n};\n\n// -------------------------- drop -------------------------- //\n\nproto.shift = function( item, x, y ) {\n  var shiftPosition;\n  var minDistance = Infinity;\n  var position = { x: x, y: y };\n  this.shiftTargets.forEach( function( target ) {\n    var distance = getDistance( target, position );\n    if ( distance < minDistance ) {\n      shiftPosition = target;\n      minDistance = distance;\n    }\n  });\n  item.rect.x = shiftPosition.x;\n  item.rect.y = shiftPosition.y;\n};\n\nfunction getDistance( a, b ) {\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return Math.sqrt( dx * dx + dy * dy );\n}\n\n// -------------------------- drag move -------------------------- //\n\nvar DRAG_THROTTLE_TIME = 120;\n\n/**\n * handle an item drag move event\n * @param {Element} elem\n * @param {Number} x - horizontal change in position\n * @param {Number} y - vertical change in position\n */\nproto.itemDragMove = function( elem, x, y ) {\n  var item = this.isEnabled && this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  x -= this.size.paddingLeft;\n  y -= this.size.paddingTop;\n\n  var _this = this;\n  function onDrag() {\n    _this.shift( item, x, y );\n    item.positionDropPlaceholder();\n    _this.layout();\n  }\n\n  // throttle\n  var now = new Date();\n  if ( this._itemDragTime && now - this._itemDragTime < DRAG_THROTTLE_TIME ) {\n    clearTimeout( this.dragTimeout );\n    this.dragTimeout = setTimeout( onDrag, DRAG_THROTTLE_TIME );\n  } else {\n    onDrag();\n    this._itemDragTime = now;\n  }\n};\n\n// -------------------------- drag end -------------------------- //\n\n/**\n * handle an item drag end event\n * @param {Element} elem\n */\nproto.itemDragEnd = function( elem ) {\n  var item = this.isEnabled && this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  clearTimeout( this.dragTimeout );\n  item.element.classList.add('is-positioning-post-drag');\n\n  var completeCount = 0;\n  var _this = this;\n  function onDragEndLayoutComplete() {\n    completeCount++;\n    if ( completeCount != 2 ) {\n      return;\n    }\n    // reset drag item\n    item.element.classList.remove('is-positioning-post-drag');\n    item.hideDropPlaceholder();\n    _this.dispatchEvent( 'dragItemPositioned', null, [ item ] );\n  }\n\n  item.once( 'layout', onDragEndLayoutComplete );\n  this.once( 'layoutComplete', onDragEndLayoutComplete );\n  item.moveTo( item.rect.x, item.rect.y );\n  this.layout();\n  this.dragItemCount = Math.max( 0, this.dragItemCount - 1 );\n  this.sortItemsByPosition();\n  item.disablePlacing();\n  this.unstamp( item.element );\n};\n\n/**\n * binds Draggabilly events\n * @param {Draggabilly} draggie\n */\nproto.bindDraggabillyEvents = function( draggie ) {\n  this._bindDraggabillyEvents( draggie, 'on' );\n};\n\nproto.unbindDraggabillyEvents = function( draggie ) {\n  this._bindDraggabillyEvents( draggie, 'off' );\n};\n\nproto._bindDraggabillyEvents = function( draggie, method ) {\n  var handlers = this.handleDraggabilly;\n  draggie[ method ]( 'dragStart', handlers.dragStart );\n  draggie[ method ]( 'dragMove', handlers.dragMove );\n  draggie[ method ]( 'dragEnd', handlers.dragEnd );\n};\n\n/**\n * binds jQuery UI Draggable events\n * @param {jQuery} $elems\n */\nproto.bindUIDraggableEvents = function( $elems ) {\n  this._bindUIDraggableEvents( $elems, 'on' );\n};\n\nproto.unbindUIDraggableEvents = function( $elems ) {\n  this._bindUIDraggableEvents( $elems, 'off' );\n};\n\nproto._bindUIDraggableEvents = function( $elems, method ) {\n  var handlers = this.handleUIDraggable;\n  $elems\n    [ method ]( 'dragstart', handlers.start )\n    [ method ]( 'drag', handlers.drag )\n    [ method ]( 'dragstop', handlers.stop );\n};\n\n// ----- destroy ----- //\n\nvar _destroy = proto.destroy;\nproto.destroy = function() {\n  _destroy.apply( this, arguments );\n  // disable flag; prevent drag events from triggering. #72\n  this.isEnabled = false;\n};\n\n// -----  ----- //\n\nPackery.Rect = Rect;\nPackery.Packer = Packer;\n\nreturn Packery;\n\n}));\n\n/*!\n * Packery layout mode v2.0.0\n * sub-classes Packery\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'isotope/js/layout-mode',\n        'packery/js/packery'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('isotope-layout/js/layout-mode'),\n      require('packery')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode,\n      window.Packery\n    );\n  }\n\n}( window, function factor( LayoutMode, Packery ) {\n\n\n  // create an Outlayer layout class\n  var PackeryMode = LayoutMode.create('packery');\n  var proto = PackeryMode.prototype;\n\n  var keepModeMethods = {\n    _getElementOffset: true,\n    _getMeasurement: true\n  };\n\n  // inherit Packery prototype\n  for ( var method in Packery.prototype ) {\n    // do not inherit mode methods\n    if ( !keepModeMethods[ method ] ) {\n      proto[ method ] = Packery.prototype[ method ];\n    }\n  }\n\n  // set packer in _resetLayout\n  var _resetLayout = proto._resetLayout;\n  proto._resetLayout = function() {\n    this.packer = this.packer || new Packery.Packer();\n    this.shiftPacker = this.shiftPacker || new Packery.Packer();\n    _resetLayout.apply( this, arguments );\n  };\n\n  var _getItemLayoutPosition = proto._getItemLayoutPosition;\n  proto._getItemLayoutPosition = function( item ) {\n    // set packery rect\n    item.rect = item.rect || new Packery.Rect();\n    return _getItemLayoutPosition.call( this, item );\n  };\n\n  // needsResizeLayout for vertical or horizontal\n  var _needsResizeLayout = proto.needsResizeLayout;\n  proto.needsResizeLayout = function() {\n    if ( this._getOption('horizontal') ) {\n      return this.needsVerticalResizeLayout();\n    } else {\n      return _needsResizeLayout.call( this );\n    }\n  };\n\n  // point to mode options for horizontal\n  var _getOption = proto._getOption;\n  proto._getOption = function( option ) {\n    if ( option == 'horizontal' ) {\n      return this.options.isHorizontal !== undefined ?\n        this.options.isHorizontal : this.options.horizontal;\n    }\n    return _getOption.apply( this.isotope, arguments );\n  };\n\n  return PackeryMode;\n\n}));\n"],"sourceRoot":"/source/"}