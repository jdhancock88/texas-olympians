{"version":3,"sources":["+custom.js"],"names":["$","document","ready","setupData","athletes","sked","each","k","v","athlete","events","nextDate","this","nextdate","substring","dateParser","parse","dateFormat","name","event","next_date","next_time","nexttime","channel","roundresult","gold","silver","bronze","push","buildOlympians","console","log","athDivs","d3","select","selectAll","data","enter","append","attr","athContent","d","toLowerCase","replace","athMedals","text","html","athBio","bioContent","age","hometown","sport","bio","moreOverlay","content","i","length","undefined","link1text","link1url","link2text","link2url","link3text","link3url","click","closest","hasClass","expand","thisObj","direction","target","find","toggleClass","addClass","removeClass","Date","year","getFullYear","dataCounter","time","format","getJSON"],"mappings":"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","file":"scripts-bundle.js","sourcesContent":["$(document).ready(function() {\n\n\t//custom scripting goes here\n\n\t// injecting current year into footer\n\t// DO NOT DELETE\n\n\tvar d = new Date();\n\tvar year = d.getFullYear();\n\n\t$('.copyright').text(year);\n\n\t// data counter will keep track if all of our data is loaded before we build the page\n\tvar dataCounter = 0;\n\n\t// variables that will ultimately hold our data\n\tvar sked;\n\tvar athletes;\n\n\t// date parser to parse the string into a date object\n\tvar dateParser = d3.time.format(\"%Y-%m-%d\");\n\n\t// date formater turns the date object into the correct Mon. Day, Year format\n\tvar dateFormat = d3.time.format(\"%b. %d, %Y\");\n\n\t/////////////////////////////////////////////\n\t///// GETTING THE DATA //////////////////////\n\t/////////////////////////////////////////////\n\n\t$.getJSON(\"http://interactives.dallasnews.com/data-store/2016/062016-texas-olympians-sked.json\", function(data) {\n\t\tsked = data;\n\t\tdataCounter++;\n\n\t\tif (dataCounter === 2) {\n\t\t\tsetupData(athletes, sked);\n\t\t}\n\t});\n\n\t$.getJSON(\"http://interactives.dallasnews.com/data-store/2016/062016-texas-olympians-athletes.json\", function(data) {\n\t\tathletes = data;\n\t\tdataCounter++;\n\n\t\tif (dataCounter === 2) {\n\t\t\tsetupData(athletes, sked);\n\t\t}\n\t});\n\n\t/////////////////////////////////////////////\n\t///// SETTING UP OUR DATA FOR ALL ATHLETES //\n\t/////////////////////////////////////////////\n\n\n\t// for each athlete, we'll cycle through our sked and add each event\n\t// to an events key on the athlete object\n\n\tfunction setupData(athletes, sked) {\n\n\t\t$.each(athletes, function(k,v) {\n\n\t\t\tvar athlete = v;\n\t\t\tathlete.events = [];\n\n\t\t\t$.each(sked, function() {\n\n\t\t\t\t// cut our date down to just YYYY-MM-DD\n\t\t\t\t// parse it into a date object\n\t\t\t\t// then format it into our MMM. DD, YYYY format\n\t\t\t\tvar nextDate = this.nextdate.substring(0,10);\n\t\t\t\tnextDate = dateParser.parse(nextDate);\n\t\t\t\tnextDate = dateFormat(nextDate);\n\n\t\t\t\t// add each event into our events key\n\t\t\t\tif (athlete.name === this.athlete) {\n\t\t\t\t\tvar event = {\n\t\t\t\t\t\t\"event\": this.event,\n\t\t\t\t\t\t\"next_date\": nextDate,\n\t\t\t\t\t\t\"next_time\": this.nexttime,\n\t\t\t\t\t\t\"channel\": this.channel,\n\t\t\t\t\t\t\"roundresult\": this.roundresult,\n\t\t\t\t\t\t\"gold\": this.gold,\n\t\t\t\t\t\t\"silver\": this.silver,\n\t\t\t\t\t\t\"bronze\": this.bronze,\n\t\t\t\t\t};\n\t\t\t\t\tathlete.events.push(event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t\t// pass the data off to our olympian drawing function\n\t\tbuildOlympians(athletes);\n\t}\n\n\n\t/////////////////////////////////////////////\n\t///// BUILDING OUT THE PAGE /////////////////\n\t/////////////////////////////////////////////\n\n\tfunction buildOlympians(athletes) {\n\n\t\tconsole.log(athletes);\n\n\t\tvar athDivs = d3.select(\"#olympians\").selectAll(\".athlete\")\n\t\t\t.data(athletes);\n\n\t\tathDivs.enter().append(\"div\")\n\t\t\t.attr(\"class\", \"athlete grid-item\");\n\n\t\tvar expander = athDivs.append(\"i\")\n\t\t\t.attr(\"class\", \"fa fa-plus-circle expander\");\n\n\t\tvar athImage = athDivs.append(\"img\")\n\t\t\t.attr(\"src\", function(d) {\n\t\t\t\tvar name = d.name.toLowerCase();\n\t\t\t\tname = name.replace(/ /g, \"\");\n\t\t\t\treturn \"/images/_\" + name +\".jpg\";\n\t\t\t})\n\t\t\t.attr(\"alt\", function(d) {return d.name;});\n\n\t\tvar athContent = athDivs.append(\"div\")\n\t\t\t.attr(\"class\", \"athContent\");\n\n\n\t\tvar athMedals = athContent.append(\"ul\")\n\t\t\t.attr(\"class\", \"medalGroup clearFix\");\n\n\t\t\tathMedals.append(\"li\")\n\t\t\t\t.attr(\"class\", \"gold\")\n\t\t\t\t.text(function(d) {return d.gold;});\n\n\t\t\tathMedals.append(\"li\")\n\t\t\t\t.attr(\"class\", \"silver\")\n\t\t\t\t.text(function(d) {return d.silver;});\n\n\t\t\tathMedals.append(\"li\")\n\t\t\t\t.attr(\"class\", \"bronze\")\n\t\t\t\t.text(function(d) {return d.bronze;});\n\n\n\t\tathContent.append(\"h4\")\n\t\t\t.html(function(d){return d.name;});\n\n\t\tvar athBio = athContent.append(\"div\")\n\t\t\t.attr(\"class\", \"bio\");\n\n\t\t\tathBio.append(\"div\")\n\t\t\t\t.attr(\"class\", \"info\")\n\t\t\t\t.html(function(d) {\n\t\t\t\t\tvar bioContent = \"<p class='label'>Age</p>\";\n\t\t\t\t\tbioContent += \"<h6>\" + d.age + \"</h6>\";\n \t\t\t\t\treturn bioContent;\n\t\t\t\t});\n\n\t\t\tathBio.append(\"div\")\n\t\t\t\t.attr(\"class\", \"info\")\n\t\t\t\t.html(function(d) {\n\t\t\t\t\tvar bioContent = \"<p class='label'>Hometown</p>\";\n\t\t\t\t\tbioContent += \"<h6>\" + d.hometown + \"</h6>\";\n \t\t\t\t\treturn bioContent;\n\t\t\t\t});\n\n\t\t\tathBio.append(\"div\")\n\t\t\t\t.attr(\"class\", \"info\")\n\t\t\t\t.html(function(d) {\n\t\t\t\t\tvar bioContent = \"<p class='label'>Sport</p>\";\n\t\t\t\t\tbioContent += \"<h6>\" + d.sport + \"</h6>\";\n \t\t\t\t\treturn bioContent;\n\t\t\t\t});\n\n\t\tathContent.append(\"p\")\n\t\t\t.attr(\"class\", \"blurb\")\n\t\t\t.html(function(d){return d.bio;});\n\n\t\tvar athTable = athContent.append(\"table\")\n\t\t\t.attr(\"class\", \"schedule\")\n\t\t\t.html(function(d) {\n\n\t\t\t\tvar content = \"\";\n\n\t\t\t\tcontent += \"<p class='label'>Schedule and Results</p>\";\n\n\t\t\t\tfor (i= -1; i < d.events.length; i++) {\n\t\t\t\t\tvar gold = false,\n\t\t\t\t\t\tsilver = false;\n\t\t\t\t\t\tbronze = false;\n\n\t\t\t\t\tif (i >= 0) {\n\n\t\t\t\t\t\tif (d.events[i].gold === \"x\") {\n\t\t\t\t\t\t\tgold = true;\n\t\t\t\t\t\t} else if (d.events[i].silver === \"x\") {\n\t\t\t\t\t\t\tsilver = true;\n\t\t\t\t\t\t} else if (d.events[i].bronze === \"x\") {\n\t\t\t\t\t\t\tbronze = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log(gold, silver, bronze);\n\n\t\t\t\t\tif (i === -1) {\n\t\t\t\t\t\tcontent +=  \"<tr><th>Event</th><th>Time/Date</th><th>Ch.</th><th>Round/Result</th></tr>\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontent += \"<tr><td>\" + d.events[i].event + \"</td><td>\" + d.events[i].next_time +\", \" + d.events[i].next_date + \"</td><td>\" + d.events[i].channel + \"</td>\";\n\n\t\t\t\t\t\tif (gold === true) {\n\t\t\t\t\t\t\tcontent += \"<td><span class'medal goldMedal'</td></tr>\";\n\t\t\t\t\t\t} else if (silver === true) {\n\t\t\t\t\t\t\tcontent += \"<td><span class'medal silverMedal'</td></tr>\";\n\t\t\t\t\t\t} else if (bronze === true) {\n\t\t\t\t\t\t\tcontent += \"<td><span class'medal bronzeMedal'</td></tr>\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontent += \"<td>\" + d.events[i].roundresult +  \"</td></tr>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn content;\n\n\t\t\t});\n\n\t\tvar athLinks = athContent.append(\"ul\")\n\t\t\t.attr(\"class\", \"links\")\n\t\t\t.html(function(d) {\n\t\t\t\tvar content = \"\";\n\n\t\t\t\tif (d.link1text !== undefined) {\n\t\t\t\t\tcontent += \"<li><a target='_blank' href='\" + d.link1url + \"'>\" + d.link1text + \"</a></li>\";\n\t\t\t\t}\n\n\t\t\t\tif (d.link2text !== undefined) {\n\t\t\t\t\tcontent += \"<li><a target='_blank' href='\" + d.link2url + \"'>\" + d.link2text + \"</a></li>\";\n\t\t\t\t}\n\n\t\t\t\tif (d.link3text !== undefined) {\n\t\t\t\t\tcontent += \"<li><a target='_blank' href='\" + d.link3url + \"'>\" + d.link3text + \"</a></li>\";\n\t\t\t\t}\n\n\t\t\t\treturn content;\n\n\t\t\t});\n\n\t\tvar moreOverlay = athContent.append(\"div\")\n\t\t\t.attr(\"class\", \"moreOverlay\")\n\t\t\t.append(\"button\")\n\t\t\t.attr(\"class\", \"readMore\");\n\n\t\tmoreOverlay.html(\"<i class='fa fa-plus-circle'></i> Read more\");\n\n\n\t\t$(\".readMore\").click(function() {\n\t\t\tif ($(this).closest(\".athlete\").hasClass(\"expanded\") === false) {\n\t\t\t\texpand($(this), \"expand\");\n\t\t\t} else {\n\t\t\t\texpand($(this), \"collapse\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".expander\").click(function() {\n\t\t\tif ($(this).closest(\".athlete\").hasClass(\"expanded\") === false) {\n\t\t\t\texpand($(this), \"expand\");\n\t\t\t} else {\n\t\t\t\texpand($(this), \"collapse\");\n\t\t\t}\n\t\t});\n\n\t}\n\n\tfunction expand(thisObj, direction) {\n\n\t\tvar target = thisObj.closest(\".athlete\");\n\t\tconsole.log(target);\n\n\t\ttarget.find(\".expander\").toggleClass(\"fa-plus-circle\").toggleClass(\"fa-minus-circle\");\n\n\t\tif (direction === \"expand\") {\n\t\t\ttarget.find(\".moreOverlay\").addClass(\"hidden\");\n\t\t\ttarget.addClass(\"expanded\");\n\t\t} else if (direction === \"collapse\") {\n\t\t\ttarget.find(\".moreOverlay\").removeClass(\"hidden\");\n\t\t\ttarget.removeClass(\"expanded\");\n\t\t}\n\n\t}\n\n\n});\n"],"sourceRoot":"/source/"}