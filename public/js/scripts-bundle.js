$(document).ready(function(){function e(e,a){$.each(e,function(e,t){var n=t;n.events=[],$.each(a,function(){var e=this.nextdate.substring(0,10);if(e=p.parse(e),e=u(e),n.name===this.athlete){var t={event:this.event,next_date:e,next_time:this.nexttime,channel:this.channel,roundresult:this.roundresult,gold:this.gold,silver:this.silver,bronze:this.bronze};n.events.push(t)}})}),t(e)}function t(e){console.log(e);var t=d3.select("#olympians").selectAll(".athlete").data(e);t.enter().append("div").attr("class",function(e){var t=e.sport.toLowerCase();return"athlete "+t}).attr("data-athlete",function(e){return e.name});var s=(t.append("i").attr("class","fa fa-plus-circle expander"),t.append("img").attr("src",function(e){var t=e.name.toLowerCase();return t=t.replace(/ /g,""),"/images/_"+t+".jpg"}).attr("alt",function(e){return e.name}),t.append("div").attr("class","athContent")),r=s.append("ul").attr("class","medalGroup clearFix");r.append("li").attr("class","gold").text(function(e){return e.gold}),r.append("li").attr("class","silver").text(function(e){return e.silver}),r.append("li").attr("class","bronze").text(function(e){return e.bronze}),s.append("h4").html(function(e){return e.name});var o=s.append("div").attr("class","bio");o.append("div").attr("class","info").html(function(e){var t="<p class='label'>Age</p>";return t+="<h6>"+e.age+"</h6>"}),o.append("div").attr("class","info").html(function(e){var t="<p class='label'>Hometown</p>";return t+="<h6>"+e.hometown+"</h6>"}),o.append("div").attr("class","info").html(function(e){var t="<p class='label'>Sport</p>";return t+="<h6>"+e.sport+"</h6>"}),s.append("p").attr("class","blurb").html(function(e){return e.bio});var d=(s.append("table").attr("class","schedule").html(function(e){var t="";for(t+="<p class='label'>Schedule and Results</p>",i=-1;i<e.events.length;i++){var a=!1,n=!1;bronze=!1,i>=0&&("x"===e.events[i].gold?a=!0:"x"===e.events[i].silver?n=!0:"x"===e.events[i].bronze&&(bronze=!0)),console.log(a,n,bronze),-1===i?t+="<tr><th>Event</th><th>Time/Date</th><th>Ch.</th><th>Round/Result</th></tr>":(t+="<tr><td>"+e.events[i].event+"</td><td>"+e.events[i].next_time+", "+e.events[i].next_date+"</td><td>"+e.events[i].channel+"</td>",t+=a===!0?"<td><span class'medal goldMedal'</td></tr>":n===!0?"<td><span class'medal silverMedal'</td></tr>":bronze===!0?"<td><span class'medal bronzeMedal'</td></tr>":"<td>"+e.events[i].roundresult+"</td></tr>")}return t}),s.append("ul").attr("class","links").html(function(e){var t="";return void 0!==e.link1text&&(t+="<li><a target='_blank' href='"+e.link1url+"'>"+e.link1text+"</a></li>"),void 0!==e.link2text&&(t+="<li><a target='_blank' href='"+e.link2url+"'>"+e.link2text+"</a></li>"),void 0!==e.link3text&&(t+="<li><a target='_blank' href='"+e.link3url+"'>"+e.link3text+"</a></li>"),t}),s.append("div").attr("class","moreOverlay").append("button").attr("class","readMore"));d.html("<i class='fa fa-plus-circle'></i> Read more"),$(".readMore, .expander").click(function(){$(this).closest(".athlete").hasClass("expanded")===!1?(a($(this),"expand"),h.isotope("layout")):(a($(this),"collapse"),h.isotope("layout"));var e=$(this).closest(".athlete");setTimeout(function(){n(e)},525)}),l()}function a(e,t){var a=e.closest(".athlete");"expand"===t?($(".athlete").removeClass("expanded"),$(".athlete").find(".moreOverlay").removeClass("hidden"),$(".expander").removeClass("fa-minus-circle").addClass("fa-plus-circle"),a.find(".expander").removeClass("fa-plus-circle").addClass("fa-minus-circle"),a.find(".moreOverlay").addClass("hidden"),a.addClass("expanded")):"collapse"===t&&(a.find(".expander").removeClass("fa-minus-circle").addClass("fa-plus-circle"),a.find(".moreOverlay").removeClass("hidden"),a.removeClass("expanded"))}function n(e){var t=$(window).height(),a=$(window).scrollTop(),n=e.offset().top;(n>a+(t-100)||a>n)&&$("html, body").animate({scrollTop:n-100},500)}function l(){h=$("#olympians").isotope({layoutMode:"packery",itemSelector:".athlete",precentPosition:!0,transitionDuration:500});var e="basketball";e=".basketball",$("#testButton").click(function(){console.log("test"),h.isotope({filter:e})})}var s=new Date,r=s.getFullYear();$(".copyright").text(r);var o,d,c=0,p=d3.time.format("%Y-%m-%d"),u=d3.time.format("%b. %d, %Y");$.getJSON("http://interactives.dallasnews.com/data-store/2016/062016-texas-olympians-sked.json",function(t){o=t,c++,2===c&&e(d,o)}),$.getJSON("http://interactives.dallasnews.com/data-store/2016/062016-texas-olympians-athletes.json",function(t){d=t,c++,2===c&&e(d,o)});var h});
//# sourceMappingURL=scripts-bundle.js.map
